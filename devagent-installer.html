<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevAgent Universal Installer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        display: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            DEFAULT: '#1e40af',
                            dark: '#1e3a8a',
                        },
                        secondary: {
                            DEFAULT: '#10b981',
                            dark: '#059669',
                        },
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 20px rgba(16, 185, 129, 0.3)' },
                            '50%': { boxShadow: '0 0 40px rgba(16, 185, 129, 0.6)' },
                        },
                    },
                },
            },
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 50%, #10b981 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .terminal-window {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .code-block {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
        }
        .feature-card {
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans min-h-screen">
    <!-- Header -->
    <header class="gradient-bg py-20 px-4">
        <div class="max-w-6xl mx-auto text-center">
            <div class="animate-fade-in">
                <h1 class="text-5xl md:text-7xl font-display font-bold mb-6 text-white">
                    Dev<span class="text-secondary">Agent</span>
                </h1>
                <p class="text-xl md:text-2xl text-blue-100 mb-8 max-w-3xl mx-auto">
                    Revolutionizing Your Terminal with an AI Companion
                </p>
                <p class="text-lg text-blue-200 mb-12 max-w-4xl mx-auto">
                    An AI-powered development environment that transforms your terminal into an intelligent, efficient workspace with proactive assistance and personalized learning.
                </p>
                <button id="installBtn" class="bg-secondary hover:bg-secondary-dark text-white font-bold py-4 px-8 rounded-lg text-lg transition-all duration-300 animate-pulse-glow mr-4">
                    üöÄ Install DevAgent Now
                </button>
                <button id="cloudShellBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg text-lg transition-all duration-300">
                    ‚òÅÔ∏è Open in Cloud Shell
                </button>
            </div>
        </div>
    </header>

    <!-- Platform Detection -->
    <section class="py-16 px-4 bg-gray-800">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4">Universal Installation</h2>
                <p class="text-gray-300">Automatically detects your platform and provides the best installation method</p>
            </div>
            
            <div id="platformInfo" class="glass-effect rounded-lg p-8 mb-8 text-center">
                <div id="detectedPlatform" class="text-xl font-semibold mb-4"></div>
                <div id="installInstructions" class="space-y-4"></div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="py-16 px-4 bg-gray-900">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-4xl font-bold text-center mb-16">Key Features</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="feature-card glass-effect rounded-lg p-6">
                    <div class="text-4xl mb-4">ü§ñ</div>
                    <h3 class="text-xl font-bold mb-3">Unified AI Agent</h3>
                    <p class="text-gray-300">Single intelligent agent that handles coding, shell commands, and terminal management seamlessly.</p>
                </div>
                <div class="feature-card glass-effect rounded-lg p-6">
                    <div class="text-4xl mb-4">üîÑ</div>
                    <h3 class="text-xl font-bold mb-3">Context Switching</h3>
                    <p class="text-gray-300">Effortlessly switch between coding, shell, and terminal management contexts.</p>
                </div>
                <div class="feature-card glass-effect rounded-lg p-6">
                    <div class="text-4xl mb-4">üëÅÔ∏è</div>
                    <h3 class="text-xl font-bold mb-3">Visual Feedback</h3>
                    <p class="text-gray-300">Clear explanations and visual representations for complex AI output.</p>
                </div>
                <div class="feature-card glass-effect rounded-lg p-6">
                    <div class="text-4xl mb-4">üîß</div>
                    <h3 class="text-xl font-bold mb-3">Version Control Integration</h3>
                    <p class="text-gray-300">Seamless Git operations with commit message generation and conflict resolution.</p>
                </div>
                <div class="feature-card glass-effect rounded-lg p-6">
                    <div class="text-4xl mb-4">üß©</div>
                    <h3 class="text-xl font-bold mb-3">Extensible Architecture</h3>
                    <p class="text-gray-300">Plugin system for languages, frameworks, and tools with community-driven development.</p>
                </div>
                <div class="feature-card glass-effect rounded-lg p-6">
                    <div class="text-4xl mb-4">üõ°Ô∏è</div>
                    <h3 class="text-xl font-bold mb-3">Secure Environment</h3>
                    <p class="text-gray-300">Sandboxed execution with safety measures to prevent unintended consequences.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Installation Steps -->
    <section class="py-16 px-4 bg-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12">Installation Steps</h2>
            <div class="space-y-8">
                <div class="flex items-start space-x-4">
                    <div class="bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">1</div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Prerequisites</h3>
                        <p class="text-gray-300">Ensure you have Node.js (v16+) and npm installed on your system.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-4">
                    <div class="bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">2</div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Download & Extract</h3>
                        <p class="text-gray-300">Download the DevAgent package and extract it to your desired location.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-4">
                    <div class="bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">3</div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Install Dependencies</h3>
                        <p class="text-gray-300">Run the installation commands provided below for your platform.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-4">
                    <div class="bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">4</div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Configure API Key</h3>
                        <p class="text-gray-300">Set your Gemini API key in the .env.local file.</p>
                    </div>
                </div>
                <div class="flex items-start space-x-4">
                    <div class="bg-secondary text-white rounded-full w-8 h-8 flex items-center justify-center font-bold">5</div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2">Launch DevAgent</h3>
                        <p class="text-gray-300">Start the development server and begin your AI-powered development journey.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Terminal Demo -->
    <section class="py-16 px-4 bg-gray-900">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12">See DevAgent in Action</h2>
            <div class="terminal-window">
                <div class="bg-gray-700 px-4 py-2 rounded-t-lg flex items-center space-x-2">
                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-300 ml-4">DevAgent Terminal</span>
                </div>
                <div class="p-6 font-mono text-sm">
                    <div class="text-green-400">$ devagent --help</div>
                    <div class="text-gray-300 mt-2">
                        DevAgent - AI-Powered Development Environment<br>
                        <br>
                        Commands:<br>
                        &nbsp;&nbsp;start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Launch DevAgent interface<br>
                        &nbsp;&nbsp;install&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Install DevAgent globally<br>
                        &nbsp;&nbsp;config&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configure API keys and settings<br>
                        &nbsp;&nbsp;update&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update to latest version<br>
                        <br>
                        Features:<br>
                        &nbsp;&nbsp;‚úì Unified AI Agent for all development tasks<br>
                        &nbsp;&nbsp;‚úì Proactive assistance and error corrections<br>
                        &nbsp;&nbsp;‚úì Personalized learning and adaptation<br>
                        &nbsp;&nbsp;‚úì Visual feedback and explanations<br>
                        &nbsp;&nbsp;‚úì Version control integration<br>
                        &nbsp;&nbsp;‚úì Cross-platform compatibility<br>
                    </div>
                    <div class="text-green-400 mt-4 animate-pulse">$ _</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Installation Modal -->
    <div id="installModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-700">
                <div class="flex justify-between items-center">
                    <h3 class="text-2xl font-bold">Install DevAgent</h3>
                    <button id="closeModal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
            </div>
            <div class="p-6">
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 py-12 px-4">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-gray-400 mb-4">DevAgent - Revolutionizing Development with AI</p>
            <p class="text-sm text-gray-500">Built with ‚ù§Ô∏è for developers worldwide</p>
        </div>
    </footer>

    <script>
        // Platform detection
        function detectPlatform() {
            const userAgent = navigator.userAgent.toLowerCase();
            const platform = navigator.platform.toLowerCase();
            
            if (userAgent.includes('win') || platform.includes('win')) {
                return 'windows';
            } else if (userAgent.includes('mac') || platform.includes('mac')) {
                return 'macos';
            } else if (userAgent.includes('linux') || platform.includes('linux')) {
                return 'linux';
            } else {
                return 'unknown';
            }
        }

        // Installation instructions for each platform
        const installInstructions = {
            windows: {
                name: 'Windows',
                icon: 'ü™ü',
                steps: [
                    {
                        title: 'Install Node.js',
                        command: 'Download and install Node.js from nodejs.org',
                        description: 'Required for running DevAgent'
                    },
                    {
                        title: 'Download DevAgent',
                        command: 'curl -L -o devagent.zip https://github.com/devagent/releases/latest/download/devagent-windows.zip',
                        description: 'Download the latest Windows release'
                    },
                    {
                        title: 'Extract and Install',
                        command: 'Expand-Archive devagent.zip -DestinationPath ./devagent && cd devagent && npm install',
                        description: 'Extract and install dependencies'
                    },
                    {
                        title: 'Configure API Key',
                        command: 'copy .env.example .env.local',
                        description: 'Copy environment template and add your Gemini API key'
                    },
                    {
                        title: 'Launch DevAgent',
                        command: 'npm run dev',
                        description: 'Start the DevAgent development server'
                    }
                ]
            },
            macos: {
                name: 'macOS',
                icon: 'üçé',
                steps: [
                    {
                        title: 'Install Node.js',
                        command: 'brew install node',
                        description: 'Install Node.js using Homebrew (or download from nodejs.org)'
                    },
                    {
                        title: 'Download DevAgent',
                        command: 'curl -L -o devagent.zip https://github.com/devagent/releases/latest/download/devagent-macos.zip',
                        description: 'Download the latest macOS release'
                    },
                    {
                        title: 'Extract and Install',
                        command: 'unzip devagent.zip && cd devagent && npm install',
                        description: 'Extract and install dependencies'
                    },
                    {
                        title: 'Configure API Key',
                        command: 'cp .env.example .env.local',
                        description: 'Copy environment template and add your Gemini API key'
                    },
                    {
                        title: 'Launch DevAgent',
                        command: 'npm run dev',
                        description: 'Start the DevAgent development server'
                    }
                ]
            },
            linux: {
                name: 'Linux',
                icon: 'üêß',
                steps: [
                    {
                        title: 'Install Node.js',
                        command: 'sudo apt update && sudo apt install nodejs npm',
                        description: 'Install Node.js and npm (Ubuntu/Debian) or use your distro\'s package manager'
                    },
                    {
                        title: 'Download DevAgent',
                        command: 'wget https://github.com/devagent/releases/latest/download/devagent-linux.zip',
                        description: 'Download the latest Linux release'
                    },
                    {
                        title: 'Extract and Install',
                        command: 'unzip devagent-linux.zip && cd devagent && npm install',
                        description: 'Extract and install dependencies'
                    },
                    {
                        title: 'Configure API Key',
                        command: 'cp .env.example .env.local',
                        description: 'Copy environment template and add your Gemini API key'
                    },
                    {
                        title: 'Launch DevAgent',
                        command: 'npm run dev',
                        description: 'Start the DevAgent development server'
                    }
                ]
            },
            unknown: {
                name: 'Universal',
                icon: 'üåê',
                steps: [
                    {
                        title: 'Install Node.js',
                        command: 'Visit nodejs.org and download Node.js for your platform',
                        description: 'Required for running DevAgent'
                    },
                    {
                        title: 'Download DevAgent',
                        command: 'Visit the DevAgent releases page and download the appropriate package',
                        description: 'Choose the package that matches your operating system'
                    },
                    {
                        title: 'Extract and Install',
                        command: 'Extract the downloaded package and run: npm install',
                        description: 'Extract and install dependencies'
                    },
                    {
                        title: 'Configure API Key',
                        command: 'Copy .env.example to .env.local and add your Gemini API key',
                        description: 'Set up your API configuration'
                    },
                    {
                        title: 'Launch DevAgent',
                        command: 'npm run dev',
                        description: 'Start the DevAgent development server'
                    }
                ]
            }
        };

        // Initialize platform detection
        function initializePlatformDetection() {
            const platform = detectPlatform();
            const instructions = installInstructions[platform];
            
            document.getElementById('detectedPlatform').innerHTML = 
                `${instructions.icon} Detected Platform: <span class="text-secondary font-bold">${instructions.name}</span>`;
            
            const instructionsHTML = instructions.steps.map((step, index) => `
                <div class="text-left mb-6">
                    <div class="flex items-center mb-2">
                        <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3">${index + 1}</span>
                        <h4 class="font-semibold">${step.title}</h4>
                    </div>
                    <div class="code-block p-3 mb-2">
                        <code class="text-green-400">${step.command}</code>
                    </div>
                    <p class="text-gray-400 text-sm">${step.description}</p>
                </div>
            `).join('');
            
            document.getElementById('installInstructions').innerHTML = instructionsHTML;
        }

        // Modal functionality
        function showInstallModal() {
            const platform = detectPlatform();
            const instructions = installInstructions[platform];
            
            const modalContent = `
                <div class="text-center mb-8">
                    <h4 class="text-2xl font-bold mb-4">${instructions.icon} Installing on ${instructions.name}</h4>
                    <p class="text-gray-300">Follow these steps to install DevAgent on your system</p>
                </div>
                
                <div class="space-y-6">
                    ${instructions.steps.map((step, index) => `
                        <div class="border border-gray-600 rounded-lg p-4">
                            <div class="flex items-center mb-3">
                                <span class="bg-secondary text-white rounded-full w-8 h-8 flex items-center justify-center font-bold mr-3">${index + 1}</span>
                                <h5 class="text-lg font-semibold">${step.title}</h5>
                            </div>
                            <div class="code-block p-4 mb-3">
                                <code class="text-green-400 text-sm">${step.command}</code>
                                <button onclick="copyToClipboard('${step.command.replace(/'/g, "\\'")}', this)" class="ml-4 bg-gray-600 hover:bg-gray-500 px-3 py-1 rounded text-xs transition-colors">
                                    Copy
                                </button>
                            </div>
                            <p class="text-gray-400">${step.description}</p>
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-8 p-4 bg-blue-900 bg-opacity-50 rounded-lg">
                    <h5 class="font-semibold mb-2">üîë API Key Setup</h5>
                    <p class="text-sm text-gray-300 mb-2">You'll need a Gemini API key to use DevAgent:</p>
                    <ol class="text-sm text-gray-300 list-decimal list-inside space-y-1">
                        <li>Visit <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-blue-400 hover:text-blue-300">Google AI Studio</a></li>
                        <li>Create a new API key</li>
                        <li>Copy the key to your .env.local file</li>
                    </ol>
                </div>
                
                <div class="mt-8 text-center space-y-4">
                    <button onclick="downloadDevAgent()" class="bg-secondary hover:bg-secondary-dark text-white font-bold py-3 px-6 rounded-lg transition-colors mr-4">
                        üì• Download DevAgent Package
                    </button>
                    <button onclick="oneClickInstall()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-colors mr-4">
                        ‚ö° One-Click Install Script
                    </button>
                    <button onclick="openInCloudShell()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                        ‚òÅÔ∏è Open in Cloud Shell
                    </button>
                </div>
            `;
            
            document.getElementById('modalContent').innerHTML = modalContent;
            document.getElementById('installModal').classList.remove('hidden');
            document.getElementById('installModal').classList.add('flex');
        }

        function closeInstallModal() {
            document.getElementById('installModal').classList.add('hidden');
            document.getElementById('installModal').classList.remove('flex');
        }

        // Copy to clipboard functionality
        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.classList.add('bg-green-600');
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('bg-green-600');
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // DevAgent source files embedded as base64
        const devAgentFiles = {
            'package.json': `{
  "name": "devagent",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@google/genai": "^1.16.0",
    "react-dom": "^19.1.1",
    "react": "^19.1.1"
  },
  "devDependencies": {
    "@types/node": "^22.14.0",
    "typescript": "~5.8.2",
    "vite": "^6.2.0"
  }
}`,
            'README.md': `# DevAgent - AI-Powered Development Environment

DevAgent is an intelligent terminal companion that revolutionizes your development workflow with AI assistance.

## Features

- ü§ñ Unified AI Agent for all development tasks
- üîÑ Context switching between coding, shell, and terminal management
- üëÅÔ∏è Visual feedback and explanations for complex operations
- üîß Version control integration with intelligent suggestions
- üß© Extensible plugin architecture
- üõ°Ô∏è Secure execution environment

## Quick Start

1. Install dependencies: \`npm install\`
2. Set your Gemini API key in \`.env.local\`
3. Run the app: \`npm run dev\`

## Requirements

- Node.js 16+
- Gemini API key from Google AI Studio

## License

MIT License - see LICENSE file for details.`,
            '.env.example': `# Gemini API Key
# Get your API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Optional: Custom API endpoint
# GEMINI_API_ENDPOINT=https://generativelanguage.googleapis.com`,
            'vite.config.ts': `import { defineConfig } from 'vite'

export default defineConfig({
  esbuild: {
    jsx: 'automatic',
  },
  server: {
    port: 3000,
    host: true,
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
})`
        };

        // Download functionality with embedded files
        function downloadDevAgent() {
            const platform = detectPlatform();
            const zip = new JSZip();
            
            // Add all DevAgent files to zip
            Object.entries(devAgentFiles).forEach(([filename, content]) => {
                zip.file(filename, content);
            });
            
            // Generate and download zip file
            zip.generateAsync({type: "blob"}).then(function(content) {
                const url = URL.createObjectURL(content);
                const a = document.createElement('a');
                a.href = url;
                a.download = `devagent-${platform}.zip`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // Show success message
                showNotification('DevAgent package downloaded successfully!', 'success');
            }).catch(function(error) {
                console.error('Error creating zip:', error);
                // Fallback: open GitHub releases page
                window.open('https://github.com/devagent/devagent/releases/latest', '_blank');
                showNotification('Redirected to GitHub releases page', 'info');
            });
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg text-white z-50 animate-fade-in ${
                type === 'success' ? 'bg-green-600' : 
                type === 'error' ? 'bg-red-600' : 'bg-blue-600'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // One-click installation for supported platforms
        function oneClickInstall() {
            const platform = detectPlatform();
            const commands = installInstructions[platform].steps.map(step => step.command).join(' && ');
            
            if (platform === 'windows') {
                // For Windows, create a PowerShell script
                const script = `# DevAgent Installation Script
Write-Host "Installing DevAgent..." -ForegroundColor Green
${installInstructions[platform].steps.map(step => `
Write-Host "${step.title}..." -ForegroundColor Yellow
${step.command}`).join('\n')}
Write-Host "DevAgent installation completed!" -ForegroundColor Green
Write-Host "Run 'npm run dev' to start DevAgent" -ForegroundColor Cyan`;
                
                downloadScript(script, 'install-devagent.ps1', 'application/x-powershell');
            } else {
                // For Unix-like systems, create a bash script
                const script = `#!/bin/bash
echo "Installing DevAgent..."
${installInstructions[platform].steps.map(step => `
echo "${step.title}..."
${step.command}`).join('\n')}
echo "DevAgent installation completed!"
echo "Run 'npm run dev' to start DevAgent"`;
                
                downloadScript(script, 'install-devagent.sh', 'application/x-sh');
            }
        }

        function downloadScript(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(`Installation script ${filename} downloaded!`, 'success');
        }

        // Cloud Shell integration
        function openInCloudShell() {
            const cloudShellUrl = 'https://shell.cloud.google.com/?cloudshell_git_repo=https://github.com/devagent/devagent.git&cloudshell_open_in_editor=README.md&cloudshell_tutorial=tutorial.md';
            window.open(cloudShellUrl, '_blank');
            showNotification('Opening DevAgent in Google Cloud Shell...', 'info');
        }

        // Enhanced platform-specific installation
        function getInstallationMethod() {
            const platform = detectPlatform();
            
            if (platform === 'windows') {
                return {
                    packageManager: 'npm',
                    shellCommand: 'PowerShell',
                    installPrefix: 'npm install -g'
                };
            } else if (platform === 'macos') {
                return {
                    packageManager: 'brew or npm',
                    shellCommand: 'Terminal',
                    installPrefix: 'brew install'
                };
            } else {
                return {
                    packageManager: 'npm or package manager',
                    shellCommand: 'Terminal',
                    installPrefix: 'sudo apt install'
                };
            }
        }

        // Check system requirements
        function checkSystemRequirements() {
            const requirements = {
                nodeJs: false,
                npm: false,
                git: false
            };
            
            // This would normally check actual system requirements
            // For demo purposes, we'll simulate the check
            setTimeout(() => {
                requirements.nodeJs = Math.random() > 0.3;
                requirements.npm = Math.random() > 0.3;
                requirements.git = Math.random() > 0.3;
                
                displaySystemCheck(requirements);
            }, 1000);
        }

        function displaySystemCheck(requirements) {
            const checkResults = Object.entries(requirements).map(([req, passed]) => 
                `<div class="flex items-center space-x-2">
                    <span class="${passed ? 'text-green-400' : 'text-red-400'}">${passed ? '‚úì' : '‚úó'}</span>
                    <span>${req === 'nodeJs' ? 'Node.js' : req.toUpperCase()}</span>
                </div>`
            ).join('');
            
            const checkModal = `
                <div class="text-center mb-6">
                    <h4 class="text-xl font-bold mb-4">System Requirements Check</h4>
                    <div class="space-y-2">
                        ${checkResults}
                    </div>
                </div>
            `;
            
            // This would be displayed in a separate modal or section
            console.log('System check results:', requirements);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializePlatformDetection();
            
            document.getElementById('installBtn').addEventListener('click', showInstallModal);
            document.getElementById('cloudShellBtn').addEventListener('click', openInCloudShell);
            document.getElementById('closeModal').addEventListener('click', closeInstallModal);
            
            // Close modal when clicking outside
            document.getElementById('installModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeInstallModal();
                }
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeInstallModal();
                }
            });
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add some interactive animations
        function addInteractiveAnimations() {
            const cards = document.querySelectorAll('.feature-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-slide-up');
                    }
                });
            }, {
                threshold: 0.1
            });
            
            cards.forEach(card => {
                observer.observe(card);
            });
        }

        // Initialize animations when page loads
        document.addEventListener('DOMContentLoaded', addInteractiveAnimations);
    </script>
</body>
</html>

